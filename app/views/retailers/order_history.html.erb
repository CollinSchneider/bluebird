<div class="row">

  <%= render partial: 'partials/retailer_profile_nav' %>

  <div class="col s12 m9 offset-m2">

  <div class="row">
    <h3>Order History:</h3>
  </div>
  <div class="row">
    <% if params[:query] %>
    <h6>Search results for "<%= params[:query] %>"</h6>
    <a href="<%= request.path %>">Clear</a>
    <% end %>
  </div>

  <div class="row border col s12 center-align">
    <div class="col m3">
      <h6 class="bold">Order #</h6>
    </div>
    <div class="col m2">
      <h6 class="bold">Product</h6>
    </div>
    <div class="col m2">
      <h6 class="bold">Price</h6>
    </div>
    <div class="col m2">
      <h6 class="bold">Vendor</h6>
    </div>
    <div class="col m2">
      <h6 class="bold">Sale Finished On</h6>
    </div>
  </div>
  <div id="past-orders">
    <%= render partial: 'partials/past_orders' %>
  </div>

  <%= will_paginate @past_orders %>
  </div>

</div>

<script>
$(document).ready(function(){
  infiniteScroll()
})

function infiniteScroll(){
if($('.pagination').length){
  // console.log('pagination present...');
  $(window).scroll(function(){
    var url = $('.pagination .next_page').attr('href')
    if(url && $(window).scrollTop() > $(document).height() - $(window).height() - 10) {
      $('.pagination').text("Loading...")
      // console.log('getting?');
      $.getScript(url)
    }
  })
}
}
</script>
